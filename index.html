<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CashEase - Smart Expense Tracker</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">

<!-- Chart JS -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>

<body>

<header>
  <h1>CashEase</h1>
  <nav>
    <a href="#features">Features</a>
    <a href="#dashboard">Dashboard</a>
    <a href="#goals">Goals</a>
    <a href="about.html">About CashEase</a>
  </nav>
  <button id="logoutBtn">Logout</button>
</header>

<!-- HERO -->
<section class="hero">
  <h2>Take Control of Your Money, Effortlessly</h2>
  <p>Track expenses, plan goals, get insights, and download smart financial reports.</p>
  <button onclick="document.getElementById('dashboard').scrollIntoView({behavior:'smooth'})">
    Start Tracking
  </button>
</section>

<!-- FEATURES -->
<section id="features">
  <h2 style="text-align:center;color:#2b6cb0;margin-bottom:40px;">Key Features</h2>
  <div class="features">
    <div class="feature-box"><h3>Secure Access</h3><p>Safe login and data protection.</p></div>
    <div class="feature-box"><h3>Smart Dashboard</h3><p>Visual charts and real-time expense updates.</p></div>
    <div class="feature-box"><h3>Goal Planning</h3><p>Set targets and track progress to achieve your goals.</p></div>
    <div class="feature-box"><h3>Financial Suggestions</h3><p>Personalized tips based on spending and savings streaks.</p></div>
  </div>
</section>

<!-- DASHBOARD -->
<section id="dashboard" class="dashboard">
  <h2>Expense Dashboard</h2>

  <form id="limitForm">
    <input type="number" id="limit" placeholder="Set Spending Limit (₹)" required>
    <button type="submit">Set Limit</button>
  </form>

  <form id="expenseForm">
    <input type="text" id="desc" placeholder="Description" required>
    <input type="number" id="amount" placeholder="Amount (₹)" required>
    <select id="category">
      <option>Food</option>
      <option>Transport</option>
      <option>Bills</option>
      <option>Entertainment</option>
      <option>Other</option>
    </select>
    <input type="date" id="expenseDate" required>
    <button type="submit">Add Expense</button>
  </form>

  <table id="expenseTable">
    <thead>
      <tr>
        <th>Description</th>
        <th>Amount (₹)</th>
        <th>Category</th>
        <th>Date</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody></tbody>
    <tfoot>
      <tr>
        <td>Total</td>
        <td id="totalAmount">0</td>
        <td></td>
        <td></td>
      </tr>
    </tfoot>
  </table>

  <div class="chart-container">
    <canvas id="expenseChart"></canvas>
  </div>
</section>

<!-- GOALS -->
<section id="goals" class="dashboard">
  <h2>Goal Based Planning</h2>

  <form id="goalForm">
    <input type="text" id="goalName" placeholder="Goal Name" required>
    <input type="number" id="goalAmount" placeholder="Target Amount (₹)" required>
    <input type="date" id="goalDate" required>
    <button type="submit">Add Goal</button>
  </form>

  <div id="goalList"></div>
</section>

<footer>
  <p>© 2025 CashEase. All rights reserved.</p>
</footer>

<!-- Firebase + App Logic -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
  import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";
  import { getFirestore } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBAJ9hRzqHXapze81EO-C2ZwWNU5mUM4Xc",
    authDomain: "expense-tracker25-26.firebaseapp.com",
    projectId: "expense-tracker25-26",
    storageBucket: "expense-tracker25-26.appspot.com",
    messagingSenderId: "553107606008",
    appId: "1:553107606008:web:8e5b677921c93f7ea3ee0d"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // Auth guard
  onAuthStateChanged(auth, user => {
    if (!user) {
      window.location.href = "login.html";
    }
  });

  // Logout
  document.getElementById("logoutBtn").addEventListener("click", () => {
    signOut(auth).then(() => {
      window.location.href = "login.html";
    });
  });

  // Expose for script.js
  window.auth = auth;
  window.db = db;
</script>

<!-- MAIN SCRIPT -->
<script type="module" src="script.js"></script>

</body>
</html>
